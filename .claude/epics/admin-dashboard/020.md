---
name: admin-dashboard-views
epic: admin-dashboard
status: open
priority: high
stream: C
depends_on: ["002", "003"]
created: 2026-02-19T18:00:22Z
updated: 2026-02-19T18:00:22Z
---

# Task 004: Vistas del dashboard admin (leads + analytics)

## Objetivo

Construir las páginas del panel de administración: stats overview, tabla de leads, detalle de lead, y tabla de analytics.

## Archivos a Crear

### 1. `src/app/admin/dashboard/page.tsx` — Vista principal

Contenido:
- **Stats cards (4):**
  - Total Leads
  - Leads Nuevos (sin contactar)
  - Leads esta semana
  - Tasa de conversión (%)
- **Tabla de leads recientes** (últimos 10) con link a `/admin/dashboard/leads` para ver todos
- **Resumen de analytics** (visitas hoy, esta semana)
- **Navegación:** links a "Todos los leads" y "Analytics completo"

No necesita ser bonito. Usar Tailwind, tablas HTML simples, colores neutros.

### 2. `src/app/admin/dashboard/leads/page.tsx` — Lista de leads

- Tabla completa con todos los leads
- Columnas: Nombre, Email, Negocio, Tipo, Score, Status, Fecha
- Badge de color por status:
  - `new` → azul
  - `contacted` → amarillo
  - `demo_scheduled` → naranja
  - `won` → verde
  - `lost` → rojo
- Filtros (select): por `status`, por `business_type`
- Ordenado por fecha desc por default
- Paginación simple (anterior / siguiente)
- Click en fila → navega a `/admin/dashboard/leads/[id]`

### 3. `src/app/admin/dashboard/leads/[id]/page.tsx` — Detalle de lead

Muestra todos los campos del lead:
- Información básica (nombre, email, empresa, teléfono)
- Tipo de negocio, ciudad, mensaje
- UTM params (fuente de tráfico)
- Lead score, status, fecha de registro
- Botón "← Volver a leads"

### 4. `src/app/admin/dashboard/analytics/page.tsx` — Analytics

- Stats cards: total visitas, forms enviados, tasa de conversión
- Filtro de rango de fechas (inputs date)
- Tabla: path, referrer, utm_source, form_submitted, fecha
- Resumen de fuentes de tráfico (agrupar por utm_source)

### Componentes compartidos admin

Crear `src/components/admin/`:
- `admin-header.tsx` — header simple con "Boreas Admin" + botón logout
- `stats-card.tsx` — card reutilizable para métricas
- `leads-table.tsx` — tabla de leads reutilizable
- `status-badge.tsx` — badge de color por status

## Notas de Implementación

- Usar Server Components (async/await directamente) en lugar de `useEffect` + fetch
- Queries directas a Supabase server client en los page components
- Sin estado global de admin (Zustand no necesario aquí)
- Sin animaciones, mantener simple

## Criterio Done
- [ ] `/admin/dashboard` muestra stats cards con datos reales
- [ ] `/admin/dashboard/leads` muestra tabla con todos los leads
- [ ] Filtros de status y tipo de negocio funcionan
- [ ] `/admin/dashboard/leads/[id]` muestra detalle completo
- [ ] `/admin/dashboard/analytics` muestra visitas y conversiones
- [ ] Todas las páginas tienen `noindex` (heredado del layout)
- [ ] `npm run build` sin errores
